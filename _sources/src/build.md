# Сборка программы

<!-- Что мы узнаем -->

Программа -- это файл (или набор файлов), содержимого которого выполняет процессор для решения некоторой задачи.
Созданием или разработкой программ заняты программисты.

В современных проектах разработки ПО используют разделение труда и доля программистов не так велика.
Поэтому будет правильнее выразить деятельность программиста в рамках разработки как "написание и отладка".
Кроме написания в разработку входит тестирование, документирование, сбор требований, руководство, переговоры и другая разнообразная деятельность.
Каждая из этих деятельностей содержит нюансы, и один человек их может и не осилить.
Другая причина разделения труда -- это не привязывать успех всего предприятия к одному специалисту.

<!-- Интегрированные среды разработки -->

## Языки программирования

Все множество языков программирования можно разделить на два типа: интерпретируемые и компилируемые.
Еще выделяют третий промежуточный тип, который исправляет недостатки одного типа достоинствами другого.

## Модульное программирование

<!--
* Время компиляции растет.
  Кодирование + тестирование = редактирование + компиляция + запуск + поиск ошибок
  Как улучшить компиляцию?
  - параллельная компиляция;
  - уменьшить количество файлов.

* Организация  коллективной работы над кодом.
  Если проект требует больших трудозатрат, то на него выделяют группу из нескольких человек.
  Задача руководителя -- разделить задачи так, чтобы люди работали независимо.
  Закон Брукса: привнесение в проект новых сил на поздних стадиях разработки лишь отодвигает срок сдачи проекта.
  N -> N^2
* Грамотная организация исходного кода.
  Увеличение объема исходного кода сложнее разобраться в нем.
* Повторное использование собственного и чужого кода.

Достоинства make:
* нетребовательность к вычислительным ресурсам.
  Работает в консольном режиме.
* Универсальность. Может описать проекты со сложными зависимостями и любыми правилами.
* Настраиваемость.

Недостатки make:
* сложность и невыразительность языка.
  Описание слишком громоздко.
  Обратная сторона универсальности.
* Ограниченная переносимость.
  Windows -> mingw и msys
* Проблемы с разбиением сложных проектов на части и описание правил построения подпроектов, с помощью отдельных make-файлов.

Autotools

Встроить сторонний код или собственный код из другого проекта.
Доп. код -- это не только исходный код, но и настройки, зависимости.

Все проблемы решаются при модульном программировании.
Исходный код проекта разедялется на части, называемые исходными модулями (транслируемыми).
C/C++ модуль -- единица трансляции *.c, *.h
Зависимости между модулями через функции и переменные с внешней связь (extern).
Исходный модуль -> компиляция -> объектный модуль.
Таблица импорта + экспорта.
Компоновщик (линкер, редактор связей) разрешает зависимости.
Статическая библиотека (архив) -- объединение в одном файле нескольких объектных модулей.

*Ускорение сборки*
Монолитное построение + инкрементное построение.
Инкрементное построение -- при повторной компиляции обрабатывааются только измененные модули и модули зависящие от них.
Если меняется только внутренний окд то компилируется только модуль.

Автоматизация построения проектов
---------------------------------
Двухэтапное построение ПО вручную?
Схема усложняется: несколько исполняемых модулей, геренация заголовчных файлов, промежуточнй код на C++ (Qt, flex, bison), генерация справок, документация.
Входные файлы (зависимость) --(правила вызова инструментов)-> промежуточные (цель) -> выходные (описание проекта)

Возможности инструментов сборки
* инкрементное построение
* полное построение
* построение вне каталога проекта (в каталоге построегия).

-->

```
gcc -c -fPIC hello.c -o hello.o
gcc hello.o -shared -o libhello.so
```

## Вопросы для самоконтроля
